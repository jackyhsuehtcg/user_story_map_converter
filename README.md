# User Story Map Converter

å°‡ Lark å¤šç¶­è¡¨æ ¼çš„éšå±¤å¼è³‡æ–™è½‰æ›ç‚ºäº’å‹•å¼ User Story Map å¿ƒæ™ºåœ–çš„ Web æ‡‰ç”¨ç¨‹å¼ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ”„ **è‡ªå‹•åŒæ­¥**: å¾ Lark å¤šç¶­è¡¨æ ¼è®€å–çµæ§‹åŒ–è³‡æ–™
- ğŸ—ºï¸ **äº’å‹•å¼å¿ƒæ™ºåœ–**: ç”Ÿæˆå¯äº’å‹•çš„ User Story Map è¦–è¦ºåŒ–
- ğŸ‘¥ **å¤šåœ˜éšŠæ”¯æ´**: ç®¡ç†å¤šå€‹åœ˜éšŠçš„ä¸åŒè³‡æ–™ä¾†æº
- ğŸ“± **éŸ¿æ‡‰å¼è¨­è¨ˆ**: Gmail é¢¨æ ¼çš„ç¾ä»£åŒ– Web ä»‹é¢
- ğŸ¯ **æ™ºæ…§æç¤º**: æ»‘é¼ æ‡¸åœé¡¯ç¤ºä½¿ç”¨è€…æ•…äº‹çš„æ¥å—æ¢ä»¶
- ğŸ”— **JIRA æ•´åˆ**: è‡ªå‹•ç”Ÿæˆ JIRA é€£çµ

## ç³»çµ±æ¶æ§‹

```
user_story_map_converter/
â”œâ”€â”€ app.py                 # Flask ä¸»ç¨‹å¼
â”œâ”€â”€ config.yaml           # ç³»çµ±è¨­å®šæª”
â”œâ”€â”€ requirements.txt       # ä¾è³´ç®¡ç†
â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¥­å‹™é‚è¼¯
â”‚   â”œâ”€â”€ lark_client.py   # Lark API å®¢æˆ¶ç«¯
â”‚   â”œâ”€â”€ tree_builder.py  # æ¨¹ç‹€çµæ§‹å»ºæ§‹
â”‚   â””â”€â”€ team_manager.py  # åœ˜éšŠç®¡ç†èˆ‡æª”æ¡ˆæ“ä½œ
â”œâ”€â”€ tools/               # é–‹ç™¼å·¥å…·
â”‚   â”œâ”€â”€ lark_data_extractor.py  # Lark è³‡æ–™æå–å·¥å…·
â”‚   â””â”€â”€ tree_analyzer.py       # æ¨¹ç‹€çµæ§‹åˆ†æå·¥å…·
â”œâ”€â”€ static/              # éœæ…‹æª”æ¡ˆ
â”œâ”€â”€ templates/           # HTML æ¨¡æ¿
â”œâ”€â”€ logs/               # æ—¥èªŒæª”æ¡ˆ
â”œâ”€â”€ exports/            # åŒ¯å‡ºæª”æ¡ˆå­˜æ”¾
â””â”€â”€ temp/               # è‡¨æ™‚æª”æ¡ˆ
```

## æŠ€è¡“æ£§

- **å¾Œç«¯æ¡†æ¶**: Flask
- **è³‡æ–™å„²å­˜**: JSON æª”æ¡ˆ
- **å‰ç«¯æ¡†æ¶**: Bootstrap 5
- **å¿ƒæ™ºåœ–ç”Ÿæˆ**: markmap-cli
- **è¨­å®šç®¡ç†**: PyYAML
- **HTTP è«‹æ±‚**: requests

## è³‡æ–™æµç¨‹

```
Lark API â†’ lark_client â†’ tree_builder â†’ SimpleMindmapGenerator â†’ markmap-cli â†’ HTML åŒ¯å‡º
```

## å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- Python 3.8+
- Node.js (ç”¨æ–¼ markmap-cli)

### å®‰è£ä¾è³´

```bash
# å®‰è£ Python ä¾è³´
pip install -r requirements.txt

# å®‰è£ markmap-cli
npm install -g markmap-cli
```

### è¨­å®šæª”æ¡ˆ

è¤‡è£½ä¸¦ä¿®æ”¹è¨­å®šæª”æ¡ˆï¼š

```bash
cp config.yaml.example config.yaml
```

ç·¨è¼¯ `config.yaml` è¨­å®š Lark API èªè­‰è³‡è¨Šï¼š

```yaml
app:
  secret_key: \"your-secret-key\"

lark:
  app_id: \"your-lark-app-id\"
  app_secret: \"your-lark-app-secret\"
  timeout: 30
  max_retries: 3
  requests_per_minute: 100

logging:
  level: \"INFO\"

jira:
  base_url: \"https://your-jira-domain.com\"
  issue_url_template: \"{base_url}/browse/{tcg_number}\"
  link_target: \"_blank\"
  link_title_template: \"Open {tcg_number} in JIRA\"
```

### å•Ÿå‹•æ‡‰ç”¨

```bash
python app.py
```

è¨ªå• http://localhost:8889 é–‹å§‹ä½¿ç”¨ã€‚

## ä½¿ç”¨æ–¹å¼

### 1. æ–°å¢åœ˜éšŠ

1. è¨ªå• \"åœ˜éšŠç®¡ç†\" é é¢
2. é»æ“Š \"æ–°å¢åœ˜éšŠ\" æŒ‰éˆ•
3. å¡«å…¥åœ˜éšŠåç¨±å’Œ Lark è¡¨æ ¼ URL
4. å„²å­˜è¨­å®š

### 2. ç”Ÿæˆå¿ƒæ™ºåœ–

1. åœ¨å„€è¡¨æ¿é»æ“Š \"åŒæ­¥\" æŒ‰éˆ•
2. ç³»çµ±å°‡è‡ªå‹•å¾ Lark ç²å–è³‡æ–™
3. ç”Ÿæˆå¿ƒæ™ºåœ–ä¸¦å„²å­˜
4. é»æ“Š \"æŸ¥çœ‹\" æŒ‰éˆ•æŸ¥çœ‹å¿ƒæ™ºåœ–

### 3. æŸ¥çœ‹å¿ƒæ™ºåœ–

- äº’å‹•å¼ç€è¦½å¿ƒæ™ºåœ–
- æ»‘é¼ æ‡¸åœæŸ¥çœ‹ Criteria è³‡è¨Š
- é»æ“Š JIRA é€£çµè·³è½‰åˆ°å°æ‡‰å·¥å–®

## Lark è¡¨æ ¼æ ¼å¼è¦æ±‚

æ‚¨çš„ Lark è¡¨æ ¼éœ€è¦åŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š

- **Story**: ä½¿ç”¨è€…æ•…äº‹ç·¨è™Ÿ (æ ¼å¼: Story-XXX-YYYYY)
- **Title**: ä½¿ç”¨è€…æ•…äº‹æ¨™é¡Œ
- **Parent**: çˆ¶ç´šæ•…äº‹ç·¨è™Ÿ (å¯é¸)
- **Criteria**: æ¥å—æ¢ä»¶ (å¯é¸)
- **TCG**: JIRA å·¥å–®ç·¨è™Ÿ (å¯é¸)

### ç¯„ä¾‹è¡¨æ ¼çµæ§‹

| Story | Title | Parent | Criteria | TCG |
|-------|-------|---------|----------|-----|
| Story-ARD-00001 | ç™»å…¥ç•«é¢ | | ç”¨æˆ¶å¯ä»¥é€²è¡ŒåŸºæœ¬çš„å¸³è™Ÿç®¡ç†æ“ä½œ | |
| Story-ARD-00002 | ç™»å…¥ç•«é¢ - è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ | Story-ARD-00001 | | TCG-109453 |
| Story-ARD-00003 | ç™»å…¥ç•«é¢ - å¿˜è¨˜å¯†ç¢¼ | Story-ARD-00001 | | TCG-109454 |

## åŠŸèƒ½èªªæ˜

### å„€è¡¨æ¿

- é¡¯ç¤ºæ‰€æœ‰åœ˜éšŠæ¦‚æ³
- å³æ™‚ç‹€æ…‹æ›´æ–°
- çµ±è¨ˆè³‡è¨Šé¢æ¿
- å¿«é€Ÿæ“ä½œæŒ‰éˆ•

### åœ˜éšŠç®¡ç†

- æ–°å¢/ç·¨è¼¯/åˆªé™¤åœ˜éšŠ
- æ¸¬è©¦ Lark é€£æ¥
- æ¸…ç©ºå¿ƒæ™ºåœ–
- ç®¡ç†åœ˜éšŠè¨­å®š

### å¿ƒæ™ºåœ–æŸ¥çœ‹

- äº’å‹•å¼å¿ƒæ™ºåœ–ç€è¦½
- æ”¯æ´ç¸®æ”¾å’Œå¹³ç§»
- JIRA é€£çµæ•´åˆ
- Criteria æµ®å‹•æç¤º

## é–‹ç™¼å·¥å…·

### è³‡æ–™æå–å·¥å…·

```bash
python tools/lark_data_extractor.py <lark_url>
```

### æ¨¹ç‹€çµæ§‹åˆ†æå·¥å…·

```bash
python tools/tree_analyzer.py <json_file>
```

## ä¸¦ç™¼æ§åˆ¶

ç³»çµ±ä½¿ç”¨æª”æ¡ˆé–å®šæ©Ÿåˆ¶é˜²æ­¢åŒæ™‚è™•ç†åŒä¸€åœ˜éšŠçš„è³‡æ–™ï¼Œç¢ºä¿è³‡æ–™ä¸€è‡´æ€§ã€‚

## éŒ¯èª¤è™•ç†

- è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
- è©³ç´°éŒ¯èª¤æ—¥èªŒ
- ä½¿ç”¨è€…å‹å¥½çš„éŒ¯èª¤æç¤º
- å¤šç¨®éŒ¯èª¤é¡å‹åˆ†é¡

## å®‰å…¨æ€§

- è¨­å®šæª”æ¡ˆä¸ç´å…¥ç‰ˆæœ¬æ§åˆ¶
- API è«‹æ±‚ä½¿ç”¨ HTTPS
- æª”æ¡ˆæ“ä½œå®‰å…¨æª¢æŸ¥
- é˜²æ­¢è·¯å¾‘éæ­·æ”»æ“Š

## è²¢ç»æŒ‡å—

1. Fork æœ¬å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

## æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - æŸ¥çœ‹ [LICENSE](LICENSE) æª”æ¡ˆäº†è§£è©³æƒ…ã€‚

## å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•ç²å– Lark API èªè­‰è³‡è¨Šï¼Ÿ
A: è«‹åƒè€ƒ [Lark é–‹ç™¼è€…æ–‡ä»¶](https://open.larksuite.com/) å»ºç«‹æ‡‰ç”¨ç¨‹å¼ä¸¦ç²å– app_id å’Œ app_secretã€‚

### Q: æ”¯æ´å“ªäº› Lark è¡¨æ ¼æ ¼å¼ï¼Ÿ
A: æ”¯æ´æ¨™æº–çš„å¤šç¶­è¡¨æ ¼æ ¼å¼ï¼Œéœ€è¦åŒ…å« Storyã€Titleã€Parent ç­‰åŸºæœ¬æ¬„ä½ã€‚

### Q: å¦‚ä½•è‡ªè¨‚ JIRA é€£çµï¼Ÿ
A: åœ¨ `config.yaml` ä¸­ä¿®æ”¹ `jira` å€æ®µçš„è¨­å®šã€‚

### Q: å¿ƒæ™ºåœ–ç„¡æ³•é¡¯ç¤ºæ€éº¼è¾¦ï¼Ÿ
A: æª¢æŸ¥ markmap-cli æ˜¯å¦æ­£ç¢ºå®‰è£ï¼Œä»¥åŠç€è¦½å™¨æ˜¯å¦æ”¯æ´ JavaScriptã€‚

## æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
1. æŸ¥çœ‹ [Issues](https://github.com/your-username/user_story_map_converter/issues) é é¢
2. å»ºç«‹æ–°çš„ Issue
3. è¯çµ¡é–‹ç™¼åœ˜éšŠ